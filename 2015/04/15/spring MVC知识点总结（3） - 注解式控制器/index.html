<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="spring 学习笔记," />










<meta name="description" content="注解式控制器 - 请求映射规则URL路径限定
普通URL路径映射
@RequestMapping(value={“/test1”, “/user/create”})：多个URL路径可以映射到同一个处理器的功能处理方法。
URI模板模式映射
@RequestMapping(value=”/users/{userId}”)：{×××}占位符， 请求的URL可以是 “/users/123456”或”/u">
<meta property="og:type" content="article">
<meta property="og:title" content="spring MVC知识点总结（2） - 注解式控制器">
<meta property="og:url" content="http://yoursite.com/2015/04/15/spring MVC知识点总结（3） - 注解式控制器/index.html">
<meta property="og:site_name" content="姜蜀黍的记事本">
<meta property="og:description" content="注解式控制器 - 请求映射规则URL路径限定
普通URL路径映射
@RequestMapping(value={“/test1”, “/user/create”})：多个URL路径可以映射到同一个处理器的功能处理方法。
URI模板模式映射
@RequestMapping(value=”/users/{userId}”)：{×××}占位符， 请求的URL可以是 “/users/123456”或”/u">
<meta property="og:updated_time" content="2017-01-03T13:02:30.355Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="spring MVC知识点总结（2） - 注解式控制器">
<meta name="twitter:description" content="注解式控制器 - 请求映射规则URL路径限定
普通URL路径映射
@RequestMapping(value={“/test1”, “/user/create”})：多个URL路径可以映射到同一个处理器的功能处理方法。
URI模板模式映射
@RequestMapping(value=”/users/{userId}”)：{×××}占位符， 请求的URL可以是 “/users/123456”或”/u">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"remove","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2015/04/15/spring MVC知识点总结（3） - 注解式控制器/"/>





  <title>spring MVC知识点总结（2） - 注解式控制器 | 姜蜀黍的记事本</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">姜蜀黍的记事本</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa  fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa  fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/04/15/spring MVC知识点总结（3） - 注解式控制器/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jiangCluster">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="姜蜀黍的记事本">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">spring MVC知识点总结（2） - 注解式控制器</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-04-15T18:17:00+08:00">
                2015-04-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  2,236
                </span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="注解式控制器-请求映射规则"><a href="#注解式控制器-请求映射规则" class="headerlink" title="注解式控制器 - 请求映射规则"></a>注解式控制器 - 请求映射规则</h2><p>URL路径限定</p>
<p>普通URL路径映射</p>
<p>@RequestMapping(value={“/test1”, “/user/create”})：多个URL路径可以映射到同一个处理器的功能处理方法。</p>
<p>URI模板模式映射</p>
<p>@RequestMapping(value=”/users/{userId}”)：{×××}占位符， 请求的URL可以是 “/users/123456”或”/users/abcd”，通过@PathVariable可以提取URI模板模式中的{×××}中的×××变量</p>
<p>Ant风格的URL路径映射</p>
<p>@RequestMapping(value=”/product?”)：可匹配”/product1”或”/producta”，但不匹配”/product”或”/productaa”;</p>
<p>正则表达式风格的URL路径映射</p>
<p>从Spring3.0开始支持正则表达式风格的URL路径映射，格式为{变量名:正则表达式}，这样我们就可以通过6.6.5讲的通过@PathVariable提取模式中的{×××：正则表达式匹配的值}中的×××变量了</p>
<p>组合使用URL路径限定，是”或”的关系</p>
<p>如 @RequestMapping(value={“/test1”, “/user/create”})<br>组合使用是或的关系，即”/test1”或”/user/create”请求URL路径都可以映射到@RequestMapping指定的功能处理方法</p>
<h2 id="请求方法映射限定"><a href="#请求方法映射限定" class="headerlink" title="请求方法映射限定"></a>请求方法映射限定</h2><p>//处理器的通用映射前缀<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Controller</span>  </div><div class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/customers/**"</span>)                                     </div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RequestMethodController</span> </span>&#123;  </div><div class="line">    <span class="comment">//对类级别的@RequestMapping窄化，表示showForm可处理匹配"/customers/**/create"且请求方法为"GET"的请求；</span></div><div class="line">    <span class="meta">@RequestMapping</span>(value=<span class="string">"/create"</span>, method = RequestMethod.GET) </div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">showForm</span><span class="params">()</span> </span>&#123;  </div><div class="line">        System.out.println(<span class="string">"===============GET"</span>);  </div><div class="line">        <span class="keyword">return</span> <span class="string">"customer/create"</span>;    </div><div class="line">    &#125;</div><div class="line">    <span class="comment">//对类级别的@RequestMapping进行窄化，表示submit可处理匹配"/customers/**/create"且请求方法为"POST"的请求。</span></div><div class="line">    <span class="meta">@RequestMapping</span>(value=<span class="string">"/create"</span>, method = RequestMethod.POST)<span class="comment">//③类级别的@RequestMapping窄化  </span></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">submit</span><span class="params">()</span> </span>&#123;  </div><div class="line">        System.out.println(<span class="string">"================POST"</span>);  </div><div class="line">        <span class="keyword">return</span> <span class="string">"redirect:/success"</span>;          </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>组合使用请求方法映射限定是”或”的关系</p>
<p>@RequestMapping(value=”/methodOr”, method = {RequestMethod.POST, RequestMethod.GET})：即请求方法可以是 GET 或 POST。</p>
<p>提示</p>
<p>1、一般浏览器只支持GET、POST请求方法，<br>2、除了GET、POST，还有HEAD、OPTIONS、PUT、DELETE、TRACE。<br>3、DispatcherServlet默认开启对 GET、POST、PUT、DELETE、HEAD的支持；<br>4、如果需要支持OPTIONS、TRACE，请添加DispatcherServlet在web.xml的初始化参数：dispatchOptionsRequest 和 dispatchTraceRequest 为true。</p>
<p>请求参数数据映射限定<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> cn.javass.chapter6.web.controller.method;  </div><div class="line"><span class="meta">@Controller</span>  </div><div class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/customers/**"</span>)                                     <span class="comment">//①处理器的通用映射前缀  </span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RequestMethodController</span> </span>&#123;  </div><div class="line">    <span class="meta">@RequestMapping</span>(value=<span class="string">"/create"</span>, method = RequestMethod.GET)<span class="comment">//②类级别的@RequestMapping窄化  </span></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">showForm</span><span class="params">()</span> </span>&#123;  </div><div class="line">        System.out.println(<span class="string">"===============GET"</span>);  </div><div class="line">        <span class="keyword">return</span> <span class="string">"customer/create"</span>;    </div><div class="line">    &#125;  </div><div class="line">    <span class="meta">@RequestMapping</span>(value=<span class="string">"/create"</span>, method = RequestMethod.POST)<span class="comment">//③类级别的@RequestMapping窄化  </span></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">submit</span><span class="params">()</span> </span>&#123;  </div><div class="line">        System.out.println(<span class="string">"================POST"</span>);  </div><div class="line">        <span class="keyword">return</span> <span class="string">"redirect:/success"</span>;          </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>请求参数数据映射限定<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> cn.javass.chapter6.web.controller.parameter;  </div><div class="line"><span class="comment">//省略import  </span></div><div class="line"><span class="meta">@Controller</span>  </div><div class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/parameter1"</span>)                                      <span class="comment">//①处理器的通用映射前缀  </span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RequestParameterController1</span> </span>&#123;  </div><div class="line">    <span class="comment">//表示请求中有"create"的参数名且请求方法为"GET"即可匹配，如可匹配的请求URL"http://×××/parameter1?create"</span></div><div class="line">    <span class="meta">@RequestMapping</span>(params=<span class="string">"create"</span>, method=RequestMethod.GET)   </div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">showForm</span><span class="params">()</span> </span>&#123;  </div><div class="line">        System.out.println(<span class="string">"===============showForm"</span>);  </div><div class="line">        <span class="keyword">return</span> <span class="string">"parameter/create"</span>;          </div><div class="line">    &#125;  </div><div class="line">    <span class="comment">//表示请求中有"create"的参数名且请求方法为"POST"即可匹配 </span></div><div class="line">    <span class="meta">@RequestMapping</span>(params=<span class="string">"create"</span>, method=RequestMethod.POST)    </div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">submit</span><span class="params">()</span> </span>&#123;  </div><div class="line">        System.out.println(<span class="string">"================submit"</span>);  </div><div class="line">        <span class="keyword">return</span> <span class="string">"redirect:/success"</span>;          </div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>请求参数中指定参数名 = 值</p>
<p>@RequestMapping(params=”create”, method=RequestMethod.GET)<br>表示请求中有”create”的参数名且请求方法为”GET”即可匹配，如可匹配的请求URL”<a href="http://×××/parameter1?create“" target="_blank" rel="external">http://×××/parameter1?create“</a></p>
<p>请求参数中指定参数名 != 值</p>
<p>@RequestMapping(params=”submitFlag!=create”, method=RequestMethod.GET)<br>表示请求中的参数”submitFlag!=create”且请求方法为”GET”即可匹配，如可匹配的请求URL”<a href="http://×××/parameter1?submitFlag=abc“" target="_blank" rel="external">http://×××/parameter1?submitFlag=abc“</a></p>
<p>组合使用请求参数名，是”且”的关系</p>
<p>@RequestMapping(params={“test1”, “test2=create”})<br>表示请求中的有”test1”参数名 且 有”test2=create”参数即可匹配，如可匹配的请求URL”<a href="http://×××/parameter3?test1&amp;test2=create&quot;。" target="_blank" rel="external">http://×××/parameter3?test1&amp;test2=create&quot;。</a></p>
<p>请求头数据映射限定</p>
<p>请求头数据中有指定参数名</p>
<p>@RequestMapping(value=”/header/test1”, headers = “Accept”)<br>表示请求的URL必须为”/header/test1”且请求头中必须有Accept参数才能匹配。</p>
<p>请求头数据中没有指定参数名</p>
<p>@RequestMapping(value=”/header/test2”, headers = “!abc”)<br>表示请求的URL必须为”/header/test2”且请求头中必须没有abc参数才能匹配。（将Modify Header的abc参数值删除即可）</p>
<p>请求头数据中指定参数名 = 值</p>
<p>@RequestMapping(value=”/header/test3”, headers = “Content-Type=application/json”)<br>表示请求的URL必须为”/header/test3” 且 请求头中必须有”Content-Type=application/json”参数即可匹配。（将Modify Header的Content-Type参数值改为”application/json”即可）</p>
<p>请求头数据中指定参数名 != 值</p>
<p>@RequestMapping(value=”/header/test7”, headers = “Accept!=text/vnd.wap.wml”)<br>表示请求的URL必须为”/header/test7” 且 请求头中必须有”Accept”参数但值不等于”text/vnd.wap.wml”即可匹配</p>
<p>组合使用请求头数据：是”且”的关系</p>
<p>@RequestMapping(value=”/header/test8”, headers = {“Accept!=text/vnd.wap.wml”,”abc=123”})<br>表示请求的URL必须为”/header/test8” 且 请求头中必须有”Accept”参数但值不等于”text/vnd.wap.wml”且 请求中必须有参数”abc=123”即可匹配</p>
<h2 id="注解式控制器-生产者消费者限定"><a href="#注解式控制器-生产者消费者限定" class="headerlink" title="注解式控制器 - 生产者消费者限定"></a>注解式控制器 - 生产者消费者限定</h2><p>基本概念</p>
<p>Media Type</p>
<p>互联网媒体类型，一般就是我们所说的MIME类型，用来确定请求的内容类型或响应的内容类型</p>
<p>常见Media Type:</p>
<p>text/html ： HTML格式          text/plain ：纯文本格式             text/xml ：XML格式<br>image/gif ：gif图片格式          image/jpeg ：jpg图片格式          image/png：png图片格式</p>
<p>application/x-www-form-urlencoded ： <form enctype="">中默认的encType，form表单数据被编码为key/value格式发送到服务器（表单默认的提交数据的格式）。<br>multipart/form-data ： 当你需要在表单中进行文件上传时，就需要使用该格式；</form></p>
<p>application/xhtml+xml ：XHTML格式               application/xml     ： XML数据格式<br>application/atom+xml  ：Atom XML聚合格式    application/json    ： JSON数据格式<br>application/pdf       ：pdf格式                        application/msword  ： Word文档格式<br>application/octet-stream ： 二进制流数据（如常见的文件下载）。<br>Content-Type</p>
<p>内容类型，即请求/响应的内容区数据的媒体类型</p>
<p>请求头的内容类型，表示发送到服务器的内容数据的媒体类型<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/ContentType"</span>, method = RequestMethod.GET)  </div><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">showForm</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;  </div><div class="line">    <span class="comment">//form表单，使用application/x-www-form-urlencoded编码方式提交表单  </span></div><div class="line">    <span class="keyword">return</span> <span class="string">"consumesproduces/Content-Type"</span>;  </div><div class="line">&#125;  </div><div class="line"></div><div class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/ContentType"</span>, method = RequestMethod.POST, headers = <span class="string">"Content-Type=application/x-www-form-urlencoded"</span>)  </div><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">request1</span><span class="params">(HttpServletRequest request)</span> <span class="keyword">throws</span> IOException </span>&#123;  </div><div class="line">    <span class="comment">//1. 得到请求的内容区数据的类型  </span></div><div class="line">    String contentType = request.getContentType();   </div><div class="line">    System.out.println(<span class="string">"========ContentType:"</span> + contentType);  </div><div class="line">    <span class="comment">//2. 得到请求的内容区数据的编码方式，如果请求中没有指定则为null  </span></div><div class="line">    <span class="comment">//注意，我们的CharacterEncodingFilter这个过滤器设置了编码(UTF-8)  </span></div><div class="line">    <span class="comment">//编码只能被指定一次，即如果客户端设置了编码，则过滤器不会再设置  </span></div><div class="line">    String characterEncoding = request.getCharacterEncoding();  </div><div class="line">    System.out.println(<span class="string">"========CharacterEncoding:"</span> + characterEncoding);  </div><div class="line"></div><div class="line">    <span class="comment">//3. 表示请求的内容区数据为form表单提交的参数，此时我们可以通过request.getParameter得到数据（key=value）  </span></div><div class="line">    System.out.println(request.getParameter(<span class="string">"realname"</span>));  </div><div class="line">    System.out.println(request.getParameter(<span class="string">"username"</span>));  </div><div class="line">    <span class="keyword">return</span> <span class="string">"success"</span>;  </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>request中设置请求头”Content-Type: application/x-www-form-urlencoded”表示请求的数据为key/value数据</p>
<p>request功能处理方法：只对请求头为”Content-Type:application/x-www-form-urlencoded”的请求进行处理（即消费请求内容区数据）</p>
<p>request.getContentType()：可以得到请求头的内容区数据类型（即Content-Type头的值）<br>request.getCharacterEncoding()：如”Content-Type:application/json;charset=GBK”,则得到的编码为”GBK”，否则如果你设置过滤器（CharacterEncodingFilter）则得到它设置的编码，否则返回null。<br>request.getParameter()：因为请求的内容区数据为application/x-www-form-urlencoded格式的数据，因此我们可以通过request.getParameter()得到相应参数数据。<br>响应头的内容类型，表示发送到客户端的内容数据类型，和请求头的内容类型类似，只是方向相反</p>
<h2 id="生产者、消费者限定"><a href="#生产者、消费者限定" class="headerlink" title="生产者、消费者限定"></a>生产者、消费者限定</h2><ol>
<li>功能处理方法是消费者</li>
</ol>
<p>@RequestMapping(value = “/consumes”, consumes = {“application/json”})<br>此处使用consumes来指定功能处理方法能消费的媒体类型，其通过请求头的”Content-Type”来判断</p>
<p>此种方式相对使用@RequestMapping的headers = “Content-Type=application/json”更能表明你的目的</p>
<ol>
<li>功能处理方法是生产者</li>
</ol>
<p>@RequestMapping(value = “/produces”, produces = “application/json”)<br>表示将功能处理方法将生产json格式的数据，此时根据请求头中的Accept进行匹配，如请求头”Accept:application/json”时即可匹配</p>
<p>此种方式相对使用@RequestMapping的headers = “Accept=application/json”更能表明你的目的</p>
<ol>
<li>窄化时是覆盖 而 非继承</li>
</ol>
<p>如类级别的映射为 @RequestMapping(value=”/narrow”, produces=”text/html”)，方法级别的为@RequestMapping(produces=”application/xml”)，此时方法级别的映射将覆盖类级别的，因此请求头“Accept:application/xml”是成功的，而“text/html”将报406错误码，表示不支持的请求媒体类型</p>
<ol>
<li>组合使用生产者、消费者限定是”或”的关系</li>
</ol>
<p>@RequestMapping(produces={“text/html”, “application/json”}) ：将匹配“Accept:text/html”或“Accept:application/json”</p>
<ol>
<li>问题</li>
</ol>
<p>消费的数据，如JSON数据、XML数据都是由我们读取请求的InputStream并根据需要自己转换为相应的模型数据，比较麻烦；</p>
<p>生产的数据，如JSON数据、XML数据都是由我们自己先把模型数据转换为json/xml等数据，然后输出响应流，也是比较麻烦的。</p>
<p>Spring提供了一组注解（@RequestBody、@ResponseBody）和一组转换类（HttpMessageConverter）来完成我们遇到的问题</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/spring-学习笔记/" rel="tag"># spring 学习笔记</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2015/04/12/spring MVC知识点总结（2） - 拦截器/" rel="next" title="spring MVC知识点总结（2） - 拦截器">
                <i class="fa fa-chevron-left"></i> spring MVC知识点总结（2） - 拦截器
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2015/08/01/NodeJS知识点（1） - 异步IO/" rel="prev" title="NodeJS学习笔记（1） - 异步IO">
                NodeJS学习笔记（1） - 异步IO <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">jiangCluster</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
